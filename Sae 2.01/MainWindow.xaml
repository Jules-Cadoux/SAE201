<Window
    x:Class="Sae_2._01.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:Sae_2._01"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Title="Application de réservation"
    Width="800"
    Height="850"
    mc:Ignorable="d" WindowStartupLocation="CenterScreen" WindowState="Maximized">
    <Window.DataContext>
        <local:ApplicationData x:Name="dataReservation"/>
    </Window.DataContext>
    <Grid>
        <TabControl>
            <TabItem Header="Commander">
                <Grid Background="White">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="33*" />
                        <ColumnDefinition Width="67*" />
                    </Grid.ColumnDefinitions>
                    <StackPanel Grid.Column="0">
                        <Label
                            Margin="0,15,0,0"
                            HorizontalAlignment="Center"
                            Content="Chercher un véhicule"
                            FontSize="20" />

                        <Label
                            Margin="0,15,0,0"
                            HorizontalAlignment="Center"
                            Content="Rechercher avec une catégorie" />
                        <TextBox x:Name="rechercheCategorie"
                            MinWidth="120"
                            HorizontalAlignment="Center"
                            Text=""
                            TextWrapping="Wrap" TextChanged="rechercheCategorie_TextChanged" />

                        <Label
                            Margin="0,25,0,0"
                            HorizontalAlignment="Center"
                            Content="Rechercher avec un magasin" />

                        <TextBox x:Name="rechercheMagasin" HorizontalAlignment="Center" MinWidth="120" TextChanged="rechercheMagasin_TextChanged"></TextBox>
                        
                        <StackPanel
                            Margin="10,25,0,0"
                            HorizontalAlignment="Center"
                            Orientation="Horizontal">
                            <RadioButton
                                x:Name="rbManuelle"
                                Content="Manuelle"
                                FontSize="12"
                                GroupName="Genre" Checked="rbManuelle_Checked" />
                            <RadioButton
                                x:Name="rbAutomatique"
                                Margin="10,0,0,0"
                                Content="Automatique"
                                FontSize="12"
                                GroupName="Genre" Checked="rbAutomatique_Checked" />

                        </StackPanel>

                        <Label Content="Sélectionner les options" HorizontalAlignment="Center" FontSize="22" Margin="0,25,0,0"/>
                        <Label Content="Assurance au dommage" Margin="0,15,0,0" FontSize="14" HorizontalAlignment="Center"/>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" >
                            <RadioButton x:Name="rbPasAssurance" Content="Aucune" GroupName="Genre"  Checked="rbPasAssurance_Checked"/>
                            <RadioButton x:Name="rbDommageCorporel" Content="Corporel" GroupName="Genre" Margin="10,0,0,0" Checked="rbDommageCorporel_Checked" />
                            <RadioButton x:Name="rbDommageVol" Content="Vol" GroupName="Genre" Margin="10,0,0,0" Checked="rbDommageVol_Checked"/>
                            <RadioButton x:Name="rbDommageVolEtCorporel" Content="Les deux" GroupName="Genre" Margin="10,0,0,0" Checked="rbDommageVolEtCorporel_Checked"/>

                        </StackPanel
>
                        <Label Content="Forfait kilométrique" FontSize="14" HorizontalAlignment="Center"/>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" >
                            <RadioButton x:Name="rbMoins100" Content="- 100 km" GroupName="Genre" Checked="rbMoins100_Checked"/>
                            <RadioButton x:Name="rb100A250" Content="100 à 250 km" GroupName="Genre" Margin="10,0,0,0" Checked="rb100A250_Checked" />
                            <RadioButton x:Name="rb250Plus" Content="+ 250 km" GroupName="Genre" Margin="10,0,0,0" Checked="rb250Plus_Checked"/>
                        </StackPanel>
                        <Label x:Name="montantVehicule" Content="Montant réservation avec véhicule : " FontSize="12" HorizontalAlignment="Center" Margin="0,0,0,0"/>
                        <Label x:Name="montantAssurance" Content="Pourcentage avec  l'assurance : " FontSize="12" HorizontalAlignment="Center" Margin="0,0,0,0"/>
                        <Label x:Name="montantTotal" Content="Montant total : " FontSize="12" HorizontalAlignment="Center" Margin="0,0,0,0"/>


                        <Label Content="Chercher un client" FontSize="20" HorizontalAlignment="Center" Margin="0,40,0,0"/>
                        <Label Content="Rechercher avec un nom" HorizontalAlignment="Center" Margin="0,25,0,0"/>
                        <TextBox x:Name="tbRecherche_ClientNom" TextWrapping="Wrap" Text="" Width="120" TextChanged="tbRecherche_ClientNom_TextChanged"/>
                        <Label Content="Rechercher avec un numéro de téléphone" HorizontalAlignment="Center" Margin="0,15,0,0"/>
                        <TextBox x:Name="tbRechercheClientTelephone" TextWrapping="Wrap" Text="" Width="120" TextChanged="tbRechercheClientTelephone_TextChanged"/>



                    </StackPanel>
                    <StackPanel Grid.Column="1">
                        <Label
                            HorizontalAlignment="Center"
                            Content="Sélectionnez un ou plusieurs véhicules"
                            FontSize="20" />
                        <DataGrid x:Name="dgSelectResa"
                            MinHeight="125"
                            MaxHeight="125"
                            Margin="0,0,0,0"
                            HorizontalAlignment="Center"
                            AutoGenerateColumns="False"
                            IsReadOnly="True" ItemsSource="{Binding LesVehicules}">
                            <DataGrid.Columns>
                                <DataGridTextColumn Width="100" Header="Nom véhicule" Binding="{Binding Nom_vehicule}"/>
                                <DataGridTextColumn Width="100" Header="Immatriculation" Binding="{Binding Immatriculation}"/>
                                <DataGridTextColumn Width="100" Header="Nom magasin" Binding="{Binding Un_magasin.Nom_magasin}"/>
                                <DataGridTextColumn Width="100" Header="Catégorie" Binding="{Binding Une_categorie.Nom_categorie}"/>
                                <DataGridTextColumn Width="100" Header="Type Boite" Binding="{Binding Type_boite}"/>


                            </DataGrid.Columns>
                        </DataGrid>
                        <Button x:Name="btAjouter"
                            Margin="0,25,0,0"
                            HorizontalAlignment="Center"
                            Content="Ajouter à la sélection" Click="btAjouter_Click" />
                        <Label
                            Margin="0,25,0,0"
                            HorizontalAlignment="Center"
                            Content="Véhicule sélectionné" />
                        <DataGrid x:Name="dgAjouter"
                            MinHeight="75"
                            MaxHeight="75"
                            Margin="0,0,0,0"
                            HorizontalAlignment="Center" AutoGenerateColumns="False" IsReadOnly="True" ItemsSource="{Binding LesVehiculesAjoutes}">
                            <DataGrid.Columns>
                                <DataGridTextColumn Width="100" Header="Nom véhicule" Binding="{Binding Nom_vehicule}"/>
                                <DataGridTextColumn Width="100" Header="Immatriculation" Binding="{Binding Immatriculation}"/>
                                <DataGridTextColumn Width="100" Header="Nom magasin" Binding="{Binding Un_magasin.Nom_magasin}"/>
                                <DataGridTextColumn Width="100" Header="Catégorie" Binding="{Binding Une_categorie.Nom_categorie}"/>
                            </DataGrid.Columns>
                        </DataGrid>

                        <Label Content="Date début réservation un client" HorizontalAlignment="Center" Margin="0,40,0,0"></Label>
                        <DatePicker x:Name="dpDebut" HorizontalAlignment="Center" DisplayDate="2024-06-01" SelectedDate="2024-06-10" SelectedDateChanged="dpDebut_SelectedDateChanged"/>

                        <Label Content="Date fin réservation un client" HorizontalAlignment="Center" Margin="0,10,0,0"></Label>
                        <DatePicker x:Name="dpFin" HorizontalAlignment="Center" DisplayDate="2024-06-01" SelectedDate="2024-06-10" SelectedDateChanged="dpFin_SelectedDateChanged" />


                        <Label Content="Choississez un client" HorizontalAlignment="Center" Margin="0,40,0,0"></Label>

                        <DataGrid x:Name="dgClients"
                            MinHeight="125"
                            MaxHeight="125"
                            HorizontalAlignment="Center"
                            AutoGenerateColumns="False"
                            IsReadOnly="True" ItemsSource="{Binding LesClients}">
                            <DataGrid.Columns >
                                <DataGridTextColumn Width="90" Header="Nom du client" Binding="{Binding Nom_client}" />
                                <DataGridTextColumn Width="80" Header="Téléphone" Binding="{Binding Telephone_client}"/>
                                <DataGridTextColumn Width="100" Header="Mail" Binding="{Binding Mail_client}"/>
                            </DataGrid.Columns>
                        </DataGrid>
                        <Button x:Name="btCréerClient" Content="  Créer un client  " Margin="0,15,0,0" HorizontalAlignment="Center" Click="btCréerClient_Click"/>
                        <Button x:Name="btenregistrerResa" Content="  Enregistrer la réservation  " Margin="0,25,0,0" HorizontalAlignment="Center" Click="btenregistrerResa_Click"/>



                    </StackPanel>
                    <TextBox HorizontalAlignment="Center" Margin="109,165,0,0" TextWrapping="Wrap" Text="TextBox" Width="120" VerticalAlignment="Center"/>
                </Grid>


            </TabItem>
            <TabItem Header="Visualiser">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="33*" />
                        <ColumnDefinition Width="67*" />

                    </Grid.ColumnDefinitions>
                    <StackPanel Grid.Column="0" Background="White">
                        <Label
                            Margin="0,50,0,0"
                            HorizontalAlignment="Center"
                            Content="Trier avec le nom du client" />
                        <TextBox x:Name="tbResaClient"
                            Width="120"
                            Text=""
                            TextWrapping="Wrap" TextChanged="tbResaClient_TextChanged" />
                        <Button x:Name="btAfficherPlaque" Content=" Afficher immatriculation " Margin="0,50,0,0" HorizontalAlignment="Center" Click="btAfficherPlaque_Click"/>
                    </StackPanel>

                    <StackPanel Grid.Column="1" Background="White">
                        <DataGrid x:Name="dgResa"
                            Width="515"
                            MinHeight="150"
                            Margin="0,50,0,0"
                            HorizontalAlignment="Center"
                            IsReadOnly="True" ItemsSource="{Binding LesReservations}"
                            AutoGenerateColumns="False"
                            >
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="Nom Client" Binding="{Binding Un_client.Nom_client}" Width="80" />
                                <DataGridTextColumn Header="Date de début" Binding="{Binding Date_debut_reservation,StringFormat=dd/MM/yyyy}" Width="100" />
                                <DataGridTextColumn Header="Date de fin" Binding="{Binding Date_fin_reservation,StringFormat=dd/MM/yyyy}" Width="80" />
                                <DataGridTextColumn Header="Montant total" Binding="{Binding Montant_reservation}" Width="90" />
                                <DataGridTextColumn Header="Forfait km" Binding="{Binding Forfait_km}" Width="90" />
                                <DataGridTextColumn Header="Type Assurance" Binding="{Binding Une_assurance.Description_assurance}" Width="130" />


                            </DataGrid.Columns>
                        </DataGrid>
                    </StackPanel>
                </Grid>
            </TabItem>


        </TabControl>

    </Grid>
</Window>
