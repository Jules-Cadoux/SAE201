<UserControl
    x:Class="SAE201.UserControls.UserControlCreerCommande"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:SAE201.UserControls"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Height="965"
    d:DesignWidth="800"
    Background="#F9F9F9"
    mc:Ignorable="d">

    <Grid>
        <TabControl Margin="20">
            <TabItem Header="Créer Commande" IsSelected="True">
                <TabItem.HeaderTemplate>
                    <DataTemplate>
                        <TextBlock
                            Margin="10,5"
                            FontWeight="SemiBold"
                            Foreground="#6366F1"
                            Text="Créer Commande" />
                    </DataTemplate>
                </TabItem.HeaderTemplate>
            </TabItem>

        </TabControl>
        <DataGrid
            x:Name="dgCommandes"
            Margin="30,103,84,561"
            AlternatingRowBackground="#FFF8F8"
            AutoGenerateColumns="False"
            Background="White"
            BorderBrush="#8B0000"
            BorderThickness="2"
            GridLinesVisibility="Horizontal"
            HeadersVisibility="Column"
            HorizontalGridLinesBrush="#E0E0E0"
            IsReadOnly="True"
            ItemsSource="{Binding LesDemandes}"
            RowBackground="White">
            <DataGrid.ColumnHeaderStyle>
                <Style TargetType="{x:Type DataGridColumnHeader}">
                    <Setter Property="Background" Value="#8B0000" />
                    <Setter Property="Foreground" Value="White" />
                    <Setter Property="FontWeight" Value="Bold" />
                    <Setter Property="Padding" Value="8,5" />
                    <Setter Property="BorderBrush" Value="#660000" />
                    <Setter Property="BorderThickness" Value="0,0,1,0" />
                </Style>
            </DataGrid.ColumnHeaderStyle>
            <DataGrid.Columns>
                <DataGridTextColumn
                    Width="2*"
                    Binding="{Binding NumVin.NomVin}"
                    Header="Vin" />
                <DataGridTextColumn
                    Width="*"
                    Binding="{Binding NumVin.NumFournisseur.NomFournisseur}"
                    Header="Fournisseur" />
                <DataGridTextColumn
                    Width="*"
                    Binding="{Binding NumEmploye.Nom}"
                    Header="Demandé par " />
                <DataGridTextColumn
                    Width="*"
                    Binding="{Binding DateDemande}"
                    Header="Date" />
                <DataGridTextColumn
                    Width="*"
                    Binding="{Binding Accepter}"
                    Header="Choix " />
            </DataGrid.Columns>
        </DataGrid>
        <Label
            Margin="30,61,0,0"
            HorizontalAlignment="Left"
            VerticalAlignment="Top"
            Content="Créer une commande"
            FontSize="20"
            FontWeight="Bold" />
        <Button
            x:Name="buttEditerDemande"
            Width="30"
            Height="30"
            Margin="0,241,30,0"
            HorizontalAlignment="Right"
            VerticalAlignment="Top"
            Background="#8B0000"
            BorderBrush="#660000"
            BorderThickness="1"
            Click="buttEditerDemande_Click"
            Content="&#xE70F;"
            Cursor="Hand"
            FontFamily="Segoe MDL2 Assets"
            FontWeight="SemiBold"
            Foreground="White"
            ToolTip="Editer" />

        <StackPanel x:Name="lesCommandesAPasser" Margin="20,409,20,99">
            <Label
                Margin="10,10,0,0"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Content="Commandes"
                FontSize="18"
                FontWeight="Bold" />

            <!--  ItemsControl pour afficher les commandes groupées par fournisseur  -->
            <ItemsControl ItemsSource="{Binding LesCommandesParFournisseur}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <!--  StackPanel pour chaque fournisseur  -->
                        <StackPanel Margin="10,10">
                            <!--  Nom du fournisseur  -->
                            <TextBlock
                                FontSize="16"
                                FontWeight="Bold"
                                Text="{Binding NomFournisseur}" />

                            <!--  Affichage des commandes pour ce fournisseur  -->
                            <StackPanel>
                                <ItemsControl ItemsSource="{Binding Commandes}">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Grid Margin="0,5">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="2*" />
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="*" />
                                                </Grid.ColumnDefinitions>

                                                <!--  Nom du vin  -->
                                                <TextBlock
                                                    Grid.Column="0"
                                                    VerticalAlignment="Center"
                                                    Text="{Binding NumVin.NomVin}" />

                                                <!--  Prix unitaire  -->
                                                <TextBlock
                                                    Grid.Column="1"
                                                    VerticalAlignment="Center"
                                                    Text="{Binding PrixUnitaire}" />

                                                <!--  Quantité  -->
                                                <TextBlock
                                                    Grid.Column="2"
                                                    VerticalAlignment="Center"
                                                    Text="{Binding Quantite}" />

                                                <!--  Prix total  -->
                                                <TextBlock
                                                    Grid.Column="3"
                                                    VerticalAlignment="Center"
                                                    Text="{Binding PrixTotal}" />
                                            </Grid>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>

                                <!--  Bouton pour valider la commande  -->
                                <Button
                                    Margin="5,10,0,0"
                                    HorizontalAlignment="Left"
                                    VerticalAlignment="Top"
                                    Background="#8B0000"
                                    BorderBrush="#660000"
                                    BorderThickness="1"
                                    Content="Valider la commande" />
                            </StackPanel>
                        </StackPanel>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </StackPanel>
    </Grid>
</UserControl>