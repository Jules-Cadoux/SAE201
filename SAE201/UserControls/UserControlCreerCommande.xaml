<UserControl
    x:Class="SAE201.UserControls.UserControlCreerCommande"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:SAE201.UserControls"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Height="965"
    d:DesignWidth="800"
    Background="#FFFFFF"
    mc:Ignorable="d">

    <Grid>
        <DataGrid
            x:Name="dgCommandes"
            Margin="30,103,84,561"
            AlternatingRowBackground="#FFF8F8"
            AutoGenerateColumns="False"
            Background="White"
            BorderBrush="#8B0000"
            BorderThickness="2"
            GridLinesVisibility="Horizontal"
            HeadersVisibility="Column"
            HorizontalGridLinesBrush="#E0E0E0"
            IsReadOnly="True"
            ItemsSource="{Binding LesDemandes}"
            RowBackground="White">
            <DataGrid.ColumnHeaderStyle>
                <Style TargetType="{x:Type DataGridColumnHeader}">
                    <Setter Property="Background" Value="#8B0000" />
                    <Setter Property="Foreground" Value="White" />
                    <Setter Property="FontWeight" Value="Bold" />
                    <Setter Property="Padding" Value="8,5" />
                    <Setter Property="BorderBrush" Value="#660000" />
                    <Setter Property="BorderThickness" Value="0,0,1,0" />
                </Style>
            </DataGrid.ColumnHeaderStyle>
            <DataGrid.Columns>
                <DataGridTextColumn
                    Width="2*"
                    Binding="{Binding NumVin.NomVin}"
                    Header="Vin" />
                <DataGridTextColumn
                    Width="*"
                    Binding="{Binding NumVin.NumFournisseur.NomFournisseur}"
                    Header="Fournisseur" />
                <DataGridTextColumn
                    Width="*"
                    Binding="{Binding NumEmploye.Nom}"
                    Header="Demandé par " />
                <DataGridTextColumn
                    Width="*"
                    Binding="{Binding DateDemande}"
                    Header="Date" />
                <DataGridTextColumn
                    Width="*"
                    Binding="{Binding Accepter}"
                    Header="Choix " />
            </DataGrid.Columns>
        </DataGrid>
        <Label
            Margin="30,61,0,0"
            HorizontalAlignment="Left"
            VerticalAlignment="Top"
            Content="Créer une commande"
            FontSize="20"
            FontWeight="Bold" />
        <Button
            x:Name="buttEditerDemande"
            Width="30"
            Height="30"
            Margin="0,241,30,0"
            HorizontalAlignment="Right"
            VerticalAlignment="Top"
            Background="#8B0000"
            BorderBrush="#660000"
            BorderThickness="1"
            Click="buttEditerDemande_Click"
            Content="&#xE70F;"
            Cursor="Hand"
            FontFamily="Segoe MDL2 Assets"
            FontWeight="SemiBold"
            Foreground="White"
            ToolTip="Editer" />

        <ScrollViewer x:Name="lesCommandesAPasser" Margin="20,409,20,99">
            <StackPanel>
                <Label
                    Margin="10,10,0,10"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Top"
                    Content="Commandes"
                    FontSize="18"
                    FontWeight="Bold" />

                <ListBox
                    x:Name="lbCommandesFournisseurs"
                    Height="397"
                    Background="Transparent"
                    BorderThickness="0"
                    ItemsSource="{Binding LesDemandes}"
                    ScrollViewer.HorizontalScrollBarVisibility="Disabled">

                    <ListBox.ItemContainerStyle>
                        <Style TargetType="ListBoxItem">
                            <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                            <Setter Property="Padding" Value="0" />
                            <Setter Property="Margin" Value="0" />
                            <Setter Property="BorderThickness" Value="0" />
                            <Setter Property="Background" Value="Transparent" />
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="ListBoxItem">
                                        <ContentPresenter />
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </ListBox.ItemContainerStyle>

                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <Border
                                Margin="0,10,0,20"
                                Padding="15"
                                Background="White"
                                BorderBrush="#E0E0E0"
                                BorderThickness="1"
                                CornerRadius="8">
                                <StackPanel>
                                    <Grid Margin="0,0,0,15">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>

                                        <TextBlock
                                            Grid.Column="0"
                                            VerticalAlignment="Center"
                                            FontSize="14"
                                            FontWeight="Bold"
                                            Foreground="#333"
                                            Text="{Binding NumVin.NumFournisseur.NomFournisseur}" />

                                        <TextBlock
                                            x:Name="tbNomVin"
                                            Grid.Column="1"
                                            Width="200"
                                            HorizontalAlignment="Center"
                                            FontSize="12"
                                            FontWeight="SemiBold"
                                            Foreground="#666"
                                            Text="VIN" />
                                        <TextBlock
                                            x:Name="tbPrixUnitaire"
                                            Grid.Column="2"
                                            Width="100"
                                            HorizontalAlignment="Center"
                                            FontSize="12"
                                            FontWeight="SemiBold"
                                            Foreground="#666"
                                            Text="PRIX UNITAIRE" />
                                        <TextBlock
                                            x:Name="tbQuantite"
                                            Grid.Column="3"
                                            Width="80"
                                            HorizontalAlignment="Center"
                                            FontSize="12"
                                            FontWeight="SemiBold"
                                            Foreground="#666"
                                            Text="QUANTITÉ" />
                                        <TextBlock
                                            x:Name="tbPrixTot"
                                            Grid.Column="4"
                                            Width="80"
                                            HorizontalAlignment="Center"
                                            FontSize="12"
                                            FontWeight="SemiBold"
                                            Foreground="#666"
                                            Text="PRIX TOT" />
                                    </Grid>

                                    <ListBox
                                        Background="Transparent"
                                        BorderThickness="0"
                                        ItemsSource="{Binding LesDemandes}"
                                        ScrollViewer.HorizontalScrollBarVisibility="Disabled">

                                        <ListBox.ItemTemplate>
                                            <DataTemplate>
                                                <Grid Margin="0,5,0,5" Cursor="">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*" />
                                                        <ColumnDefinition Width="*" />
                                                        <ColumnDefinition Width="*" />
                                                        <ColumnDefinition Width="*" />
                                                        <ColumnDefinition Width="*" />
                                                    </Grid.ColumnDefinitions>

                                                    

                                                    <StackPanel Grid.Column="1" Margin="10,0,0,0">
                                                        <TextBlock
                                                            x:Name="NomVin"
                                                            FontSize="13"
                                                            FontWeight="SemiBold"
                                                            Text="{Binding NumVin.NomVin}" />
                                                    </StackPanel>

                                                    <TextBlock
                                                        x:Name="tbPrixUnitaire"
                                                        Grid.Column="2"
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"
                                                        FontSize="12"
                                                        Text="{Binding NumVin.PrixVin, StringFormat={}{0:C}}" />

                                                    <TextBox
                                                        x:Name="tbQuantite"
                                                        Grid.Column="3"
                                                        Width="50"
                                                        Height="25"
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"
                                                        BorderBrush="#CCC"
                                                        BorderThickness="1"
                                                        FontSize="12"
                                                        Text="{Binding Quantite}"
                                                        TextAlignment="Center" />

                                                    <TextBlock
                                                        x:Name="tbPrixTot"
                                                        Grid.Column="4"
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"
                                                        FontSize="12"
                                                        FontWeight="SemiBold"
                                                        Text="Test" />
                                                </Grid>
                                            </DataTemplate>
                                        </ListBox.ItemTemplate>
                                    </ListBox>

                                    <Grid
                                        Margin="0,15,0,0"
                                        Background="#F8F9FA"
                                        Cursor="">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>



                                        <Button
                                            x:Name="buttValiderCommande"
                                            Grid.Column="2"
                                            Padding="15,8"
                                            Content="✓ Valider la commande"
                                            Cursor="Hand"
                                            FontSize="12"
                                            FontWeight="SemiBold" Foreground="#FFFFFF" Background="#FF770000"
                                             />
                                    </Grid>
                                </StackPanel>
                            </Border>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</UserControl>